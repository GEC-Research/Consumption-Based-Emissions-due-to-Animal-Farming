# Consumption-Based Animal-Farming Emissions (EXIOBASE 2020--2022)

This repository reproduces **per-capita, consumption-based
greenhouse-gas emissions** from **animal-based foods** for:

-   **Global North (GN)**
-   **China (CN)**
-   **Global South (GS, ex-China)**

using:

-   **EXIOBASE 3.9.6** multi-regional input--output (MRIO) tables for
    **2020, 2021, 2022**, and
-   **World Bank World Development Indicators (WDI)** total population
    data (indicator **SP.POP.TOTL**).

The analysis is implemented in:

`CBA_exiobase_livestock_2020-2022.ipynb`

------------------------------------------------------------------------

## 1. Repository Structure

    project/
    ├── data/
    │   ├── IOT_2020_ixi.zip
    │   ├── IOT_2021_ixi.zip
    │   ├── IOT_2022_ixi.zip
    │   └── API_SP.POP.TOTL_DS2_en_csv_v2_XXXXXXX.zip
    │
    ├── outputs/
    │   ├── region_totals_cba_2020.csv
    │   ├── region_totals_cba_2021.csv
    │   ├── region_totals_cba_2022.csv
    │   ├── group_totals_Etotal_2020_EXIOaligned.csv
    │   ├── group_totals_Etotal_2021_EXIOaligned.csv
    │   ├── group_totals_Etotal_2022_EXIOaligned.csv
    │   ├── percap_animal_CBA_GN_CN_GS_2020_2022.pdf
    │   └── percap_animal_CBA_GN_CN_GS_2020_2022.png
    │
    └── CBA_exiobase_livestock_2020-2022.ipynb

------------------------------------------------------------------------

## 2. Input Data (Manual Download Required)

Both EXIOBASE and World Bank datasets must be downloaded manually to
ensure reproducibility.

------------------------------------------------------------------------

## 2.1 EXIOBASE Input--Output Tables (2020--2022)

**Official archive (Release 3.9.6):**
https://zenodo.org/records/15689391

Download the following ZIP files:

-   `IOT_2020_ixi.zip`
-   `IOT_2021_ixi.zip`
-   `IOT_2022_ixi.zip`

Place all three files in:

    data/

These archives contain the matrices required for consumption-based
accounting:

-   **A**: technical coefficient matrix
-   **Y**: final demand matrix
-   **x**: total industry output
-   **F**: environmental extensions (CO₂, CH₄, N₂O)

Final demand is defined as the sum of:

-   Household consumption
-   Government consumption
-   NPISH (Non-Profit Institutions Serving Households)

Only **animal-based food sectors** are retained (meat, dairy, eggs,
fisheries).

------------------------------------------------------------------------

## 2.2 World Bank Population Data (WDI: SP.POP.TOTL)

**Official indicator portal:**
https://data.worldbank.org/indicator/SP.POP.TOTL

Steps:

1.  Click **Download → CSV**
2.  Place the downloaded ZIP file in:

    data/

Note: The ZIP filename generated by the World Bank includes a temporary
backend build identifier (e.g.,
`API_SP.POP.TOTL_DS2_en_csv_v2_2461.zip`) that changes across downloads.
The analysis code automatically reads the correct CSV from inside the
ZIP regardless of filename.

------------------------------------------------------------------------

## 2.3 Special Regional Handling

-   **Taiwan** is not included in the WDI file; official population
    values for 2020--2022 are inserted manually in the notebook.
-   **EXIOBASE Rest-of-World aggregate regions** (WA, WE, WF, WL, WM)
    have no population correspondence and are excluded from per-capita
    calculations.

------------------------------------------------------------------------

## 3. Region Groups (GN, CN, GS)

Countries are mapped into:

-   **Global North (GN)** -- high-income Europe, North America, Oceania,
    Japan, Korea, Taiwan
-   **China (CN)** -- China
-   **Global South excluding China (GS)** -- all other regions

GN membership is harmonized with the land-use-change (LUC) analysis for
consistency across the study.

------------------------------------------------------------------------

## 4. Method Summary

1.  Load EXIOBASE matrices **A, Y, x, F**

2.  Convert emissions **F → tCO₂e/€**

3.  Filter **Y** to household, government, and NPISH final demand

4.  Retain only **animal-product sectors**

5.  Compute full supply-chain output:

        x* = (I − A)⁻¹ y

6.  Multiply output by emission intensity

7.  Divide by population → **per-capita emissions**

8.  Aggregate results to **GN / CN / GS**

9.  Export CSV tables and figures

------------------------------------------------------------------------

## 5. How to Run

### Requirements

-   Python ≥ 3.10
-   pandas
-   numpy
-   matplotlib
-   openpyxl

### Install

    pip install pandas numpy matplotlib openpyxl

### Run

    jupyter notebook CBA_exiobase_livestock_2020-2022.ipynb

Then **Run All**.

------------------------------------------------------------------------

## 6. Data Sources

**EXIOBASE:**
Stadler, K., et al. (2022). *EXIOBASE 3.9.6 Multi-Regional Input--Output
Database*.
https://zenodo.org/records/15689391

**World Bank Population:**
World Development Indicators -- Population, total (SP.POP.TOTL).
https://data.worldbank.org/indicator/SP.POP.TOTL

------------------------------------------------------------------------

## License

- **Code:**  
  MIT License.

- **Data:**  
  This repository uses third-party datasets that are subject to their own licenses and terms of use, including EXIOBASE 3 and World Bank World Development Indicators.  
  Users should consult the original data providers for full licensing details.
